<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tf_1.8_xla_doc: xla::HloComputation Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tf_1.8_xla_doc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d3/dbc/namespacexla.html">xla</a></li><li class="navelem"><a class="el" href="../../d4/d36/classxla_1_1HloComputation.html">HloComputation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="../../d6/d79/classxla_1_1HloComputation-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">xla::HloComputation Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d2/d31/hlo__computation_8h_source.html">hlo_computation.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for xla::HloComputation:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbb/classxla_1_1HloComputation__coll__graph.svg" width="100%" height="428"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d57/classxla_1_1HloComputation_1_1Builder.html">Builder</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../de/d57/classxla_1_1HloComputation_1_1Builder.html" title="Builder class for HloComputation. ">Builder</a> class for <a class="el" href="../../d4/d36/classxla_1_1HloComputation.html">HloComputation</a>.  <a href="../../de/d57/classxla_1_1HloComputation_1_1Builder.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a876925a742ee6ee05c22a2811f13a6bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d36/classxla_1_1HloComputation.html#a876925a742ee6ee05c22a2811f13a6bb">AddInstruction</a> (std::unique_ptr&lt; <a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> &gt; instruction)</td></tr>
<tr class="separator:a876925a742ee6ee05c22a2811f13a6bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbdedf640a662908a6d9a6f0e3c74d39"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="../../d4/d36/classxla_1_1HloComputation.html">HloComputation</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d36/classxla_1_1HloComputation.html#afbdedf640a662908a6d9a6f0e3c74d39">MakeEmbeddedComputationsList</a> () const</td></tr>
<tr class="separator:afbdedf640a662908a6d9a6f0e3c74d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8cc3c537fd802217acf3f58bed861ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d36/classxla_1_1HloComputation.html#ad8cc3c537fd802217acf3f58bed861ea">CreateFusionInstruction</a> (tensorflow::gtl::ArraySlice&lt; <a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> *&gt; instructions_to_fuse, <a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html#a6a42a4ac64d4d75b68d0da888af147bf">HloInstruction::FusionKind</a> fusion_kind)</td></tr>
<tr class="separator:ad8cc3c537fd802217acf3f58bed861ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a92e460ea09a13fe5504bc0095dcb554f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d36/classxla_1_1HloComputation.html#a92e460ea09a13fe5504bc0095dcb554f">AddInstructionInternal</a> (std::unique_ptr&lt; <a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> &gt; instruction)</td></tr>
<tr class="separator:a92e460ea09a13fe5504bc0095dcb554f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a513b13379b95f5dd484fc45cacac2cc2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d36/classxla_1_1HloComputation.html#a513b13379b95f5dd484fc45cacac2cc2">FuseInstructionsInto</a> (tensorflow::gtl::ArraySlice&lt; <a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> *&gt; instructions_to_fuse, <a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> *fusion_instruction)</td></tr>
<tr class="separator:a513b13379b95f5dd484fc45cacac2cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Google docs: </p><blockquote class="doxtable">
<p>Describes a computation at the HLO level.</p>
<p>An <a class="el" href="../../d4/d36/classxla_1_1HloComputation.html">HloComputation</a> contains a directed acyclic graph of HLO instructions. The computation has a single root instruction which produces the output of the computation.</p>
</blockquote>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a876925a742ee6ee05c22a2811f13a6bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a876925a742ee6ee05c22a2811f13a6bb">&#9670;&nbsp;</a></span>AddInstruction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> * xla::HloComputation::AddInstruction </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> &gt;&#160;</td>
          <td class="paramname"><em>instruction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ol type="1">
<li>Instruction cannot be kParameter</li>
<li>Call <code><a class="el" href="../../d4/d36/classxla_1_1HloComputation.html#a92e460ea09a13fe5504bc0095dcb554f">xla::HloComputation::AddInstructionInternal()</a></code> </li>
</ol>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d4/d36/classxla_1_1HloComputation_a876925a742ee6ee05c22a2811f13a6bb_cgraph.svg" width="390" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d4/d36/classxla_1_1HloComputation_a876925a742ee6ee05c22a2811f13a6bb_icgraph.svg" width="398" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a92e460ea09a13fe5504bc0095dcb554f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92e460ea09a13fe5504bc0095dcb554f">&#9670;&nbsp;</a></span>AddInstructionInternal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> * xla::HloComputation::AddInstructionInternal </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> &gt;&#160;</td>
          <td class="paramname"><em>instruction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<ol type="1">
<li>If the instruction is not root then<ul>
<li>Set the instruction's unique name and id to parent</li>
</ul>
</li>
<li>Set parent to self</li>
<li>Add the instruction into instruction list </li>
</ol>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d4/d36/classxla_1_1HloComputation_a92e460ea09a13fe5504bc0095dcb554f_icgraph.svg" width="620" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad8cc3c537fd802217acf3f58bed861ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8cc3c537fd802217acf3f58bed861ea">&#9670;&nbsp;</a></span>CreateFusionInstruction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> * xla::HloComputation::CreateFusionInstruction </td>
          <td>(</td>
          <td class="paramtype">tensorflow::gtl::ArraySlice&lt; <a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> *&gt;&#160;</td>
          <td class="paramname"><em>instructions_to_fuse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html#a6a42a4ac64d4d75b68d0da888af147bf">HloInstruction::FusionKind</a>&#160;</td>
          <td class="paramname"><em>fusion_kind</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<blockquote class="doxtable">
<p>Creates a fusion instruction containing the given instructions. <code>fusion_kind</code> indicates the type of the fusion, e.g., loop fusion or fusion into a library call. Instructions must be in reverse topological order (root of the fused expression first). Replaces all uses of the original root instruction with the fusion instruction. The original instructions are removed if they have no uses after fusion (this is necessarily true for at least the root).</p>
</blockquote>
<p>Called by <code><a class="el" href="../../d5/db5/classxla_1_1TransposeFolding.html">xla::TransposeFolding</a></code> and <code><a class="el" href="../../df/d13/classxla_1_1BatchNormExpander.html">xla::BatchNormExpander</a></code></p>
<ul>
<li>Root is <code>instructions_to_fuse</code>.</li>
</ul>
<ol type="1">
<li>Use <code><a class="el" href="../../d4/d36/classxla_1_1HloComputation.html#a876925a742ee6ee05c22a2811f13a6bb">xla::HloComputation::AddInstruction</a></code> and <code><a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html#a538498b14c7c98c2efdd17f3defcab0b">xla::HloInstruction::CreateFusion()</a></code> to generate instruction.</li>
<li>And then use <code><a class="el" href="../../d4/d36/classxla_1_1HloComputation.html#a513b13379b95f5dd484fc45cacac2cc2">xla::HloComputation::FuseInstructionsInto</a></code> to inject into instruction. </li>
</ol>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d4/d36/classxla_1_1HloComputation_ad8cc3c537fd802217acf3f58bed861ea_cgraph.svg" width="624" height="183"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a513b13379b95f5dd484fc45cacac2cc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a513b13379b95f5dd484fc45cacac2cc2">&#9670;&nbsp;</a></span>FuseInstructionsInto()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void xla::HloComputation::FuseInstructionsInto </td>
          <td>(</td>
          <td class="paramtype">tensorflow::gtl::ArraySlice&lt; <a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> *&gt;&#160;</td>
          <td class="paramname"><em>instructions_to_fuse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d59/classxla_1_1HloInstruction.html">HloInstruction</a> *&#160;</td>
          <td class="paramname"><em>fusion_instruction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<ol type="1">
<li>Check the instruction is type <code>kFusion</code></li>
<li>Merge <code>fusion_instruction</code> to <code>instructions_to_fuse</code> </li>
</ol>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d4/d36/classxla_1_1HloComputation_a513b13379b95f5dd484fc45cacac2cc2_icgraph.svg" width="402" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="afbdedf640a662908a6d9a6f0e3c74d39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbdedf640a662908a6d9a6f0e3c74d39">&#9670;&nbsp;</a></span>MakeEmbeddedComputationsList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt; <a class="el" href="../../d4/d36/classxla_1_1HloComputation.html">HloComputation</a> * &gt; xla::HloComputation::MakeEmbeddedComputationsList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Google docs: </p><blockquote class="doxtable">
<p>Creates and returns a list of the embedded computations called by this computation. This includes all embedded computations called directly or transitively. The embedded computations are sorted such that if computation A calls computation B (eg, via a map instruction) then A will appear after B in the list.</p>
</blockquote>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>tensorflow/tensorflow/compiler/xla/service/<a class="el" href="../../d2/d31/hlo__computation_8h_source.html">hlo_computation.h</a></li>
<li>tensorflow/tensorflow/compiler/xla/service/<a class="el" href="../../d8/d7c/hlo__computation_8cc.html">hlo_computation.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
